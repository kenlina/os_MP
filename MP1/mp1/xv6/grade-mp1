#!/usr/bin/env python

from gradelib import *

r = Runner()

@test(10, "thread package with public testcase part1-0")
def test_thread_0():
    r.run_qemu(shell_script([
        'mp1-part1-0',
    ]))
    r.match(
    'mp1-part1-0',
    'thread 1: 100',
	'thread 2: 0',
	'thread 3: 10000',
	'thread 1: 101',
	'thread 2: 1',
	'thread 3: 10001',
	'thread 1: 102',
	'thread 2: 2',
	'thread 3: 10002',
	'thread 1: 103',
	'thread 2: 3',
	'thread 3: 10003',
	'thread 1: 104',
	'thread 2: 4',
	'thread 3: 10004',
	'thread 1: 105',
	'thread 2: 5',
	'thread 1: 106',
	'thread 2: 6',
	'thread 1: 107',
	'thread 2: 7',
	'thread 1: 108',
	'thread 2: 8',
	'thread 1: 109',
	'thread 2: 9',
	'',
	'exited'
    )

@test(10, "thread package with public testcase part1-1")
def test_thread_0():
    r.run_qemu(shell_script([
        'mp1-part1-1',
    ]))
    r.match(
    'mp1-part1-1',
    'thread 1: 100',
	'thread 2: 0',
	'thread 3: 10000',
	'thread 1: 101',
	'thread 2: 1',
	'thread 4: 1000',
	'thread 5: 10',
	'thread 3: 10001',
	'thread 1: 102',
	'thread 2: 2',
	'thread 4: 1001',
	'thread 5: 11',
	'thread 3: 10002',
	'thread 1: 103',
	'thread 2: 3',
	'thread 4: 1002',
	'thread 5: 12',
	'thread 1: 104',
	'thread 2: 4',
	'thread 4: 1003',
	'thread 5: 13',
	'thread 2: 5',
	'thread 4: 1004',
	'thread 5: 14',
	'thread 2: 6',
	'thread 4: 1005',
	'thread 5: 15',
	'thread 2: 7',
	'thread 4: 1006',
	'thread 5: 16',
	'thread 2: 8',
	'thread 4: 1007',
	'thread 4: 1008',
	'',
	'exited'
    )

@test(10, "thread package with private testcase part1-2")
def test_thread_0():
    r.run_qemu(shell_script([
        'mp1-part1-2',
    ]))
    r.match(
    'mp1-part1-2',
    'thread 1: 0',
    'thread 2: 0',
    'thread 3: 0',
    'thread 1: 1',
    'thread 4: 0',
    'thread 5: 0',
    'thread 2: 1',
    'thread 6: 0',
    'thread 7: 0',
    'thread 3: 1',
    'thread 1: 2',
    'thread 8: 0',
    'thread 9: 0',
    'thread 4: 1',
    'thread 10: 0',
    'thread 11: 0',
    'thread 5: 1',
    'thread 2: 2',
    'thread 12: 0',
    'thread 13: 0',
    'thread 6: 1',
    'thread 14: 0',
    'thread 15: 0',
    'thread 7: 1',
    'thread 3: 2',
    'thread 8: 1',
    'thread 9: 1',
    'thread 4: 2',
    'thread 10: 1',
    'thread 11: 1',
    'thread 5: 2',
    'thread 2: 3',
    'thread 12: 1',
    'thread 13: 1',
    'thread 6: 2',
    'thread 14: 1',
    'thread 15: 1',
    'thread 7: 2',
    'thread 3: 3',
    'thread 8: 2',
    'thread 9: 2',
    'thread 4: 3',
    'thread 10: 2',
    'thread 11: 2',
    'thread 5: 3',
    'thread 12: 2',
    'thread 13: 2',
    'thread 6: 3',
    'thread 14: 2',
    'thread 15: 2',
    'thread 7: 3',
    'thread 3: 4',
    'thread 8: 3',
    'thread 9: 3',
    'thread 4: 4',
    'thread 10: 3',
    'thread 11: 3',
    'thread 5: 4',
    'thread 12: 3',
    'thread 13: 3',
    'thread 6: 4',
    'thread 14: 3',
    'thread 15: 3',
    'thread 7: 4',
    'thread 8: 4',
    'thread 9: 4',
    'thread 4: 5',
    'thread 10: 4',
    'thread 11: 4',
    'thread 5: 5',
    'thread 12: 4',
    'thread 13: 4',
    'thread 6: 5',
    'thread 14: 4',
    'thread 15: 4',
    'thread 7: 5',
    'thread 8: 5',
    'thread 9: 5',
    'thread 10: 5',
    'thread 11: 5',
    'thread 5: 6',
    'thread 12: 5',
    'thread 13: 5',
    'thread 6: 6',
    'thread 14: 5',
    'thread 15: 5',
    'thread 7: 6',
    'thread 8: 6',
    'thread 9: 6',
    'thread 10: 6',
    'thread 11: 6',
    'thread 12: 6',
    'thread 13: 6',
    'thread 6: 7',
    'thread 14: 6',
    'thread 15: 6',
    'thread 7: 7',
    'thread 8: 7',
    'thread 9: 7',
    'thread 10: 7',
    'thread 11: 7',
    'thread 12: 7',
    'thread 13: 7',
    'thread 14: 7',
    'thread 15: 7',
    'thread 7: 8',
    'thread 8: 8',
    'thread 9: 8',
    'thread 10: 8',
    'thread 11: 8',
    'thread 12: 8',
    'thread 13: 8',
    'thread 14: 8',
    'thread 15: 8',
    'thread 8: 9',
    'thread 9: 9',
    'thread 10: 9',
    'thread 11: 9',
    'thread 12: 9',
    'thread 13: 9',
    'thread 14: 9',
    'thread 15: 9',
    'thread 9: 10',
    'thread 10: 10',
    'thread 11: 10',
    'thread 12: 10',
    'thread 13: 10',
    'thread 14: 10',
    'thread 15: 10',
    'thread 10: 11',
    'thread 11: 11',
    'thread 12: 11',
    'thread 13: 11',
    'thread 14: 11',
    'thread 15: 11',
    'thread 11: 12',
    'thread 12: 12',
    'thread 13: 12',
    'thread 14: 12',
    'thread 15: 12',
    'thread 12: 13',
    'thread 13: 13',
    'thread 14: 13',
    'thread 15: 13',
    'thread 13: 14',
    'thread 14: 14',
    'thread 15: 14',
    'thread 14: 15',
    'thread 15: 15',
    'thread 15: 16',
	'',
	'exited'
    )

@test(10, "thread package with private testcase part1-3")
def test_thread_0():
    r.run_qemu(shell_script([
        'mp1-part1-3',
    ]))
    r.match(
    'mp1-part1-3',
    'thread 1: 0',
    'thread 2: 0',
    'thread 3: 0',
    'thread 4: 0',
	'thread 5: 0',
	'thread 2: 1',
	'thread 6: 0',
	'thread 7: 0',
	'thread 3: 1',
	'thread 8: 0',
	'thread 9: 0',
	'thread 4: 1',
	'thread 10: 0',
	'thread 11: 0',
	'thread 5: 1',
	'thread 12: 0',
	'thread 13: 0',
	'thread 6: 1',
	'thread 14: 0',
	'thread 15: 0',
	'thread 7: 1',
	'thread 3: 2',
	'thread 8: 1',
	'thread 9: 1',
	'thread 4: 2',
	'thread 10: 1',
	'thread 11: 1',
	'thread 5: 2',
	'thread 12: 1',
	'thread 13: 1',
	'thread 6: 2',
	'thread 14: 1',
	'thread 15: 1',
	'thread 7: 2',
	'thread 8: 2',
	'thread 9: 2',
	'thread 4: 3',
	'thread 10: 2',
	'thread 11: 2',
	'thread 5: 3',
	'thread 12: 2',
	'thread 13: 2',
	'thread 6: 3',
	'thread 14: 2',
	'thread 15: 2',
	'thread 7: 3',
	'thread 8: 3',
	'thread 9: 3',
	'thread 10: 3',
	'thread 11: 3',
	'thread 5: 4',
	'thread 12: 3',
	'thread 13: 3',
	'thread 6: 4',
	'thread 14: 3',
	'thread 15: 3',
	'thread 7: 4',
	'thread 8: 4',
	'thread 9: 4',
	'thread 10: 4',
	'thread 11: 4',
	'thread 12: 4',
	'thread 13: 4',
	'thread 6: 5',
	'thread 14: 4',
	'thread 15: 4',
	'thread 7: 5',
	'thread 8: 5',
	'thread 9: 5',
	'thread 10: 5',
	'thread 11: 5',
	'thread 12: 5',
	'thread 13: 5',
	'thread 14: 5',
	'thread 15: 5',
	'thread 7: 6',
	'thread 8: 6',
	'thread 9: 6',
	'thread 10: 6',
	'thread 11: 6',
	'thread 12: 6',
	'thread 13: 6',
	'thread 14: 6',
	'thread 15: 6',
	'thread 8: 7',
	'thread 9: 7',
	'thread 10: 7',
	'thread 11: 7',
	'thread 12: 7',
	'thread 13: 7',
	'thread 14: 7',
	'thread 15: 7',
	'thread 9: 8',
	'thread 10: 8',
	'thread 11: 8',
	'thread 12: 8',
	'thread 13: 8',
	'thread 14: 8',
	'thread 15: 8',
	'thread 10: 9',
	'thread 11: 9',
	'thread 12: 9',
	'thread 13: 9',
	'thread 14: 9',
	'thread 15: 9',
	'thread 11: 10',
	'thread 12: 10',
	'thread 13: 10',
	'thread 14: 10',
	'thread 15: 10',
	'thread 12: 11',
	'thread 13: 11',
	'thread 14: 11',
	'thread 15: 11',
	'thread 13: 12',
	'thread 14: 12',
	'thread 15: 12',
	'thread 14: 13',
	'thread 15: 13',
	'thread 15: 14',
	'',
	'exited'
    )

@test(10, "thread package with private testcase part1-4")
def test_thread_0():
    r.run_qemu(shell_script([
        'mp1-part1-4',
    ]))
    r.match(
    'mp1-part1-4',
    'thread 1: 0',
    'thread 2: 0',
    'thread 3: 0',
    'thread 1: 1',
    'thread 2: 1',
    'thread 3: 1',
    'thread 1: 2',
    'thread 4: 0',
    'thread 5: 0',
    'thread 3: 2',
    'thread 1: 3',
    'thread 4: 1',
    'thread 6: 0',
    'thread 7: 0',
    'thread 1: 4',
    'thread 6: 1',
	'',
	'exited'
    )

@test(10, "thread package with private testcase part1-5")
def test_thread_0():
    r.run_qemu(shell_script([
        'mp1-part1-5',
    ]))
    r.match(
    'mp1-part1-5',
 	' \\ / ',
	'-( )-',
	' (o) ',
	'-( )-',
	' (-) ',
	' (o) ',
	' (o) ',
	' (.) ',
	' (-) ',
	' (-) ',
	' (-) ',
	' (o) ',
	' (.) ',
	' (.) ',
	' (-) ',
	' (.) ',
	' (-) ',
	' (-) ',
	' (.) ',
	' (.) ',
	' (.) ',
	' (-) ',
	' (.) ',
	' / \\ ',
	'',
	'exited',
    )

@test(5, "thread package with public testcase part2-0")
def test_thread_0():
    r.run_qemu(shell_script([
        'mp1-part2-0',
    ]))
    r.match(
	'mp1-part2-0',
	'thread 1: 100',
	'task 2: 101',
	'thread 2: 0',
	'thread 1: 101',
	'thread 2: 1',
	'thread 1: 102',
	'task 2: 103',
	'thread 1: 103',
	'thread 2: 2',
	'thread 1: 104',
	'task 2: 105',
	'thread 2: 3',
	'thread 1: 105',
	'thread 2: 4',
	'',
	'exited'
    )

@test(5, "thread package with public testcase part2-1")
def test_thread_0():
    r.run_qemu(shell_script([
        'mp1-part2-1',
    ]))
    r.match(
	'mp1-part2-1',
	'thread 1: 100',
	'thread 2: 0',
	'task 3: 0',
	'thread 1: 101',
	'thread 2: 1',
	'task 3: 1',
	'thread 1: 102',
	'thread 2: 2',
	'task 3: 2',
	'thread 1: 103',
	'thread 2: 3',
	'task 3: 3',
	'thread 1: 104',
	'thread 2: 4',
	'task 3: 4',
	'thread 1: 105',
	'task 3: 5',
	'thread 1: 106',
	'task 3: 6',
	'thread 1: 107',
	'task 3: 7',
	'thread 1: 108',
	'task 3: 8',
	'thread 1: 109',
	'task 3: 9',
	'thread 3: 10000',
	'thread 3: 10001',
	'thread 3: 10002',
	'thread 3: 10003',
	'thread 3: 10004',
	'',
	'exited'
    )

@test(5, "thread package with public testcase part2-2")
def test_thread_0():
    r.run_qemu(shell_script([
        'mp1-part2-2',
    ]))
    r.match(
	'mp1-part2-2',
	'thread 1: 0',
	'task 1: 1',
	'task 1: 2',
	'task 1: 3',
	'task 1: 4',
	'task 1: 5',
	'task 1: 6',
	'task 1: 7',
	'task 1: 8',
	'task 1: 9',
	'',
	'exited'
    )

@test(5, "thread package with private testcase part2-3")
def test_thread_0():
    r.run_qemu(shell_script([
        'mp1-part2-3',
    ]))
    r.match(
	'mp1-part2-3',
	'thread 1: 10',
	'task 2: 11',
	'task 3: 12',
	'task 4: 13',
	'task 5: 14',
	'task 6: 15',
	'task 7: 16',
	'task 8: 17',
	'task 9: 18',
	'task 10: 19',
	'task 1: 20',
	'task 2: 21',
	'task 3: 22',
	'task 4: 23',
	'task 5: 24',
	'task 6: 25',
	'task 7: 26',
	'task 8: 27',
	'task 9: 28',
	'task 10: 29',
	'task 1: 30',
	'task 2: 31',
	'task 3: 32',
	'task 4: 33',
	'task 5: 34',
	'task 6: 35',
	'task 7: 36',
	'task 8: 37',
	'task 9: 38',
	'task 10: 39',
	'task 1: 40',
	'task 2: 41',
	'task 3: 42',
	'task 4: 43',
	'task 5: 44',
	'task 6: 45',
	'task 7: 46',
	'task 8: 47',
	'task 9: 48',
	'task 10: 49',
	'task 1: 50',
	'task 2: 51',
	'task 3: 52',
	'task 4: 53',
	'task 5: 54',
	'task 6: 55',
	'task 7: 56',
	'task 8: 57',
	'task 9: 58',
	'task 10: 59',
	'task 1: 60',
	'task 2: 61',
	'task 3: 62',
	'task 4: 63',
	'task 5: 64',
	'task 6: 65',
	'task 7: 66',
	'task 8: 67',
	'task 9: 68',
	'task 10: 69',
	'task 1: 70',
	'task 2: 71',
	'task 3: 72',
	'task 4: 73',
	'task 5: 74',
	'task 6: 75',
	'task 7: 76',
	'task 8: 77',
	'task 9: 78',
	'task 10: 79',
	'task 1: 80',
	'task 2: 81',
	'task 3: 82',
	'task 4: 83',
	'task 5: 84',
	'task 6: 85',
	'task 7: 86',
	'task 8: 87',
	'task 9: 88',
	'task 10: 89',
	'task 1: 90',
	'task 2: 91',
	'task 3: 92',
	'task 4: 93',
	'task 5: 94',
	'task 6: 95',
	'task 7: 96',
	'task 8: 97',
	'task 9: 98',
	'task 10: 99',
	'task 1: 100',
	'thread 2: 100',
	'thread 3: 100',
	'thread 4: 100',
	'thread 5: 100',
	'thread 6: 100',
	'thread 7: 100',
	'thread 8: 100',
	'thread 9: 100',
	'thread 10: 100',
	'',
	'exited'
    )

@test(5, "thread package with private testcase part2-4")
def test_thread_0():
    r.run_qemu(shell_script([
        'mp1-part2-4',
    ]))
    r.match(
	'mp1-part2-4',
	'thread 1: 10',
	'thread 2: 11',
	'thread 3: 12',
	'thread 4: 13',
	'thread 5: 14',
	'thread 6: 15',
	'thread 7: 16',
	'thread 8: 17',
	'thread 9: 18',
	'thread 10: 19',
	'task 1: 20',
	'task 2: 21',
	'task 3: 22',
	'task 4: 23',
	'task 5: 24',
	'task 6: 25',
	'task 7: 26',
	'task 8: 27',
	'task 9: 28',
	'task 10: 29',
	'task 1: 30',
	'task 2: 31',
	'task 3: 32',
	'task 4: 33',
	'task 5: 34',
	'task 6: 35',
	'task 7: 36',
	'task 8: 37',
	'task 9: 38',
	'task 10: 39',
	'task 1: 40',
	'task 2: 41',
	'task 3: 42',
	'task 4: 43',
	'task 5: 44',
	'task 6: 45',
	'task 7: 46',
	'task 8: 47',
	'task 9: 48',
	'task 10: 49',
	'task 1: 50',
	'task 2: 51',
	'task 3: 52',
	'task 4: 53',
	'task 5: 54',
	'task 6: 55',
	'task 7: 56',
	'task 8: 57',
	'task 9: 58',
	'task 10: 59',
	'task 1: 60',
	'task 2: 61',
	'task 3: 62',
	'task 4: 63',
	'task 5: 64',
	'task 6: 65',
	'task 7: 66',
	'task 8: 67',
	'task 9: 68',
	'task 10: 69',
	'task 1: 70',
	'task 2: 71',
	'task 3: 72',
	'task 4: 73',
	'task 5: 74',
	'task 6: 75',
	'task 7: 76',
	'task 8: 77',
	'task 9: 78',
	'task 10: 79',
	'task 1: 80',
	'task 2: 81',
	'task 3: 82',
	'task 4: 83',
	'task 5: 84',
	'task 6: 85',
	'task 7: 86',
	'task 8: 87',
	'task 9: 88',
	'task 10: 89',
	'task 1: 90',
	'task 2: 91',
	'task 3: 92',
	'task 4: 93',
	'task 5: 94',
	'task 6: 95',
	'task 7: 96',
	'task 8: 97',
	'task 9: 98',
	'task 10: 99',
	'task 1: 100',
	'',
	'exited'
    )

@test(7.5, "thread package with private testcase part2-5")
def test_thread_0():
    r.run_qemu(shell_script([
        'mp1-part2-5',
    ]))
    r.match(
	'mp1-part2-5',
	'thread 1: 0',
	'thread 2: 0',
	'task 1: 0',
	'thread 3: 0',
	'task 2: 0',
	'task 1: 1',
	'thread 4: 0',
	'task 3: 0',
	'task 2: 1',
	'thread 1: 1',
	'thread 5: 0',
	'task 4: 0',
	'task 3: 1',
	'thread 2: 1',
	'task 1: 0',
	'thread 6: 0',
	'task 5: 0',
	'task 4: 1',
	'thread 3: 1',
	'task 2: 0',
	'task 1: 1',
	'thread 7: 0',
	'task 6: 0',
	'task 5: 1',
	'thread 4: 1',
	'task 3: 0',
	'task 2: 1',
	'thread 1: 2',
	'thread 8: 0',
	'task 7: 0',
	'task 6: 1',
	'thread 5: 1',
	'task 4: 0',
	'task 3: 1',
	'thread 2: 2',
	'thread 9: 0',
	'task 8: 0',
	'task 7: 1',
	'thread 6: 1',
	'task 5: 0',
	'task 4: 1',
	'thread 3: 2',
	'thread 10: 0',
	'task 9: 0',
	'task 8: 1',
	'thread 7: 1',
	'task 6: 0',
	'task 5: 1',
	'thread 4: 2',
	'task 10: 0',
	'task 9: 1',
	'thread 8: 1',
	'task 7: 0',
	'task 6: 1',
	'thread 5: 2',
	'task 10: 1',
	'thread 9: 1',
	'task 8: 0',
	'task 7: 1',
	'thread 6: 2',
	'thread 10: 1',
	'task 9: 0',
	'task 8: 1',
	'thread 7: 2',
	'task 10: 0',
	'task 9: 1',
	'thread 8: 2',
	'task 10: 1',
	'thread 9: 2',
	'thread 10: 2',
	'',
	'exited'
    )

@test(7.5, "thread package with private testcase part2-6")
def test_thread_0():
    r.run_qemu(shell_script([
        'mp1-part2-6',
    ]))
    r.match(
	'mp1-part2-6',
	'thread: 0',
	'task1: 1',
	'task2: 1',
	'thread: 1',
	'task1: 2',
	'task2: 2',
	'task2: 3',
	'thread: 2',
	'task1: 3',
	'task2: 4',
	'task2: 5',
	'task2: 6',
	'thread: 3',
	'task1: 4',
	'task2: 7',
	'task2: 8',
	'task2: 9',
	'task2: 10',
	'thread: 4',
	'task1: 5',
	'task2: 11',
	'task2: 12',
	'task2: 13',
	'task2: 14',
	'task2: 15',
	'thread: 5',
	'task1: 6',
	'task2: 16',
	'task2: 17',
	'task2: 18',
	'task2: 19',
	'task2: 20',
	'task2: 21',
	'thread: 6',
	'task1: 7',
	'task2: 22',
	'task2: 23',
	'task2: 24',
	'task2: 25',
	'task2: 26',
	'task2: 27',
	'task2: 28',
	'thread: 7',
	'task1: 8',
	'task2: 29',
	'task2: 30',
	'task2: 31',
	'task2: 32',
	'task2: 33',
	'task2: 34',
	'task2: 35',
	'task2: 36',
	'thread: 8',
	'task1: 9',
	'task2: 37',
	'task2: 38',
	'task2: 39',
	'task2: 40',
	'task2: 41',
	'task2: 42',
	'task2: 43',
	'task2: 44',
	'task2: 45',
	'thread: 9',
	'task1: 10',
	'task2: 46',
	'task2: 47',
	'task2: 48',
	'task2: 49',
	'task2: 50',
	'task2: 51',
	'task2: 52',
	'task2: 53',
	'task2: 54',
	'task2: 55',
	'',
	'exited'
    )

run_tests()